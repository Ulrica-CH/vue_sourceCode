{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// src/obserber/index.js\nclass Observer {\n  // 观测值\n  constructor(value) {\n    Object.defineProperty(value, \"__ob__\", {\n      //  值指代的就是Observer的实例\n      value: this,\n      //  不可枚举\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    });\n\n    if (Array.isArray(value)) {\n      // 重写数组原型方法来对数组的7种方法进行拦截\n      value.__proto__ = arrayMethods;\n      // 如果数组中包含数组，递归处理\n      this.observeArray(vlaue);\n    } else this.walk(value);\n  }\n  walk(data) {\n    // 对象上的所有属性依次进行观测\n    let keys = Object.keys(data);\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i];\n      let value = data[key];\n      defineReactive(data, key, value);\n    }\n  }\n  observeArray(value) {\n    value.forEach((item) => {\n      observe(item);\n    });\n  }\n}\n// Object.defineProperty数据劫持核心 兼容性在ie9以及以上\nfunction defineReactive(data, key, value) {\n  observe(value); // 递归关键\n  // --如果value还是一个对象会继续走一遍odefineReactive 层层遍历一直到value不是对象才停止\n  //   思考？如果Vue数据嵌套层级过深 >>性能会受影响\n  Object.defineProperty(data, key, {\n    get() {\n      console.log(\"获取值\");\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      console.log(\"设置值\");\n      value = newValue;\n    },\n  });\n}\nexport function observe(value) {\n  // 如果传过来的是对象或者数组 进行属性劫持\n  if (typeof data !== \"object\" || data === null) return;\n  if (data._ob__ instanceof Observer) return data._ob__;\n  return new Observer(value);\n}\n","import { observe } from \"./observe/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n\n  if (opts.data) {\n    initData(vm);\n  }\n}\nfunction proxy(vm, target, key) {\n  Object.defineProperty({\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      vm[target][key] = newValue;\n    },\n  });\n}\nexport function initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  // 响应式处理\n  observe(data);\n\n  // vm._data 简化为vm.\n  for (let key in data) {\n    proxy(vm, \"_data\", key);\n  }\n}\n","import { initState } from \"./state\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    initState(vm);\n  };\n}\n","import { initMixin } from \"./init\";\nexport default function Vue(options) {\n  // 原型上方法\n  this._init(options);\n}\n// 混入_init方法\ninitMixin(Vue);\n"],"names":[],"mappings":"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"}